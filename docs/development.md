# Development

Notes for developers.
If you want to get involved, please do!
We welcome all kinds of contributions, for example:

- docs fixes/clarifications
- bug reports
- bug fixes
- feature requests
- pull requests
- tutorials

## Workflows

<!---
This section is auto-generated by the copier template
and the text below is just a placeholder to get you started.
The workflows section will likely need to be updated
to be project specific as the project's norms are established.
-->

We don't mind whether you use a branching or forking workflow.
However, please only push to your own branches.
Pushing to other people's branches is best avoided because
it is a recipe for disaster
and is never required in our experience.

Try and keep your merge requests as small as possible
(focus on one thing if you can).
This makes life much easier for reviewers
which allows contributions to be accepted at a faster rate.

## Language

We use British English for our development.
We do this for consistency with the broader work context of our lead developers.

## Versioning

This package follows the version format described in [PEP440](https://peps.python.org/pep-0440/)
and [Semantic Versioning](https://semver.org/) to describe how the version
should change depending on the updates to the code base.

[](){releasing-reference}
## Releasing

Releasing is semi-automated via a CI job.
The CI job requires the type of version bump
that will be performed to be manually specified.
See the pdm-bump docs for the
[list of available bump rules](https://github.com/carstencodes/pdm-bump#usage).

### Standard process

The steps required are the following:

1. Bump the version: manually trigger the "bump" workflow from the main branch
   (see here: [bump workflow](https://github.com/openscm/openscm-units/actions/workflows/bump.yaml)).
   A valid "bump_rule" (see [pdm-bump's docs](https://github.com/carstencodes/pdm-bump#usage))
   will need to be specified.
   This will then trigger a draft release.

1. Edit the draft release which has been created
   (see here:
   [project releases](https://github.com/openscm/openscm-units/releases)).
   Once you are happy with the release
   (removed placeholders, added key announcements etc.)
   then hit 'Publish release'.
   This triggers a release to PyPI
   (which you can then add to the release if you want).

1. That's it, release done, make noise on social media of choice, do whatever
   else

1. Enjoy the newly available version

## Testing strategy

We support Python 3.9 and above.
We follow the [Python life-cycle schedule](https://devguide.python.org/versions/) 
and will drop support for Python versions when they reach their end of life.
Given the nature of the package,
we want to ensure support for a broad range of Python versions to minimise any downstream constraints.
Libraries building on `openscm-units` are free to further restrict the Python versions 
(or other dependencies) they support.

For downstream package maintainers we recommend following
the [SPEC 0000](https://scientific-python.org/specs/spec-0000/) deprecation policy.
This policy provides support for a key scientific packages for 24 months after release
and Python versions for 36 months after release.
The Python ecosystem is quicker to adopt new versions than it was previously
and these reduced support timelines reflect that.

None-the-less we also recommend that lockfiles are used for analysis projects
to capture the exact versions of dependencies used.
This will enable the project to be recreated in the future even if the Python version is no longer supported.

## Read the Docs

Our documentation is hosted by [Read the Docs (RtD)](https://www.readthedocs.org/),
a service for which we are very grateful.
The RtD configuration can be found in the `.readthedocs.yaml` file
in the root of this repository.
The docs are automatically deployed at
[openscm-units.readthedocs.io](https://openscm-units.readthedocs.io/en/latest/).
